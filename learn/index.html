<html>
    <head>
        <title>大钟刘学习学会(alpha)</title>
        <link rel="icon" href="\dazhongliu\file\icon\icon.png" type="image/x-icon" sizes="225x225" />
        <meta charset="utf-8" />
        <style>
            .head {
                background-color: #ff4444;
                color: #ffffff;
                text-align: left;
                width: 100%;
                height: 30px;
                padding: 25px;
                margin: -25px;
            }
    
            .body {
                background-color: #00000000;
                color: #000000;
                text-align: left;
                margin: 30px;
                margin-left: 4px;
            }
    
            .title {
                background-color: #00000000;
                color: #000000;
                text-align: center;
            }
    
            .bottom {
                background-color: #ff3333;
                color: #ffffff;
                text-align: center;
                width: 120px;
                height: 60px;
            }
    
            .navigation-bar-link {
                color: #ffffff;
                text-decoration: none;
            }
        </style>
    </head>
    <body>
        <style>
            .posters {
                text-align: center;
                color: #000000;
                text-decoration: none;
            }
    
            .posters-text {
                background: #ffffff;
                text-align: center;
                width: 324px;
                height: 30px;
                background-attachment: fixed
           }
    
            .div0 {
                display: flex;
                justify-content: center;
           }
        </style>
        <div class="head">
            <a href="/dazhongliu" class="navigation-bar-link">大钟刘官方网站</a>&emsp;
            <a href="/dazhongliu/learn" class="navigation-bar-link">学习学会</a>&emsp;
           <a href="/dazhongliu" class="navigation-bar-link">测试2</a>&emsp;
        </div>
        <div class="body">
            <h3 class="title">
                WE LEARN IN 大钟刘！
            </h3>

            <!--<script>
                fetch('/dazhongliu/learn/list/files.txt')
                    .then(r => r.text())
                    .then(text => {
                        const files = text.split('\r\n').filter(f => f);
                        const list = files.map(f => `<li><a href="${f}">${f}</a></li>`).join('');
                        document.getElementById('file-list').innerHTML = `<ul>${list}</ul>`;
                    });
            </script>
            <ul id="list"></ul>-->

            <!-- 确保有这个容器 -->
            <div id="file-list">正在加载文件列表...</div>

            <script>
                // 添加错误处理的完整版本
                fetch('/dazhongliu/learn/list/files.txt')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.text();
                    })
                    .then(text => {
                        // 处理各种换行格式
                        const files = text
                            .split(/\r?\n/)
                            .map(f => f.trim())
                            .filter(f => f && f.endsWith('.html'));

                        console.log('解析到的文件:', files);

                        if (files.length === 0) {
                            document.getElementById('file-list').innerHTML =
                                '<p>未找到HTML文件。请确保已生成files.txt</p>';
                            return;
                        }

                        const listHTML = `
                      <ul>
                        ${files.map(f => `<li><a href="${f}">${f}</a></li>`).join('')}
                      </ul>
                      <p>共找到 ${files.length} 个文件</p>
                    `;

                        document.getElementById('file-list').innerHTML = listHTML;
                    })
                    .catch(error => {
                        console.error('加载失败:', error);
                        document.getElementById('file-list').innerHTML = `
                      <p style="color:red">加载文件列表失败: ${error.message}</p>
                      <p>请检查:
                        <ol>
                          <li>files.txt 文件是否存在</li>
                          <li>是否通过HTTP服务器运行(如Live Server)</li>
                          <li>浏览器控制台是否有更多错误信息(F12打开开发者工具)</li>
                        </ol>
                      </p>
                    `;
                    });
            </script>

            <script>
                document.write("现在时间：" + Date());
            </script>
        </div>
        <div class="foot">
            <br /><br />
            <p>大钟刘学习学会(TM)网站的所有出除特殊要求外的内容采用了<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans">CC BY-NC-SA 4.0协议</a></p>
        </div>
    </body>
</html>